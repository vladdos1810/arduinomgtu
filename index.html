<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Arduino</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container { 
            max-width: 500px; 
            margin: 0 auto; 
            background: white; 
            padding: 25px; 
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .led-block { 
            margin: 20px 0; 
            padding: 20px; 
            border: 2px solid #e0e0e0; 
            border-radius: 10px;
            background: #fafafa;
        }
        .btn { 
            padding: 12px 24px; 
            margin: 8px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            color: white; 
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .on { background: #4CAF50; } /* –ó–µ–ª–µ–Ω—ã–π */
        .off { background: #f44336; } /* –ö—Ä–∞—Å–Ω—ã–π */
        .status { 
            margin-left: 15px; 
            font-weight: bold; 
            font-size: 18px;
            padding: 8px 15px;
            border-radius: 6px;
        }
        .status-on { 
            color: #4CAF50; 
            background: #e8f5e8; 
        }
        .status-off { 
            color: #f44336; 
            background: #ffeaea; 
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        h3 {
            color: #555;
            margin-bottom: 15px;
        }
        .ip-section {
            margin-top: 30px;
            padding: 20px;
            background: #e3f2fd;
            border-radius: 10px;
            border: 2px solid #bbdefb;
        }
        .ip-input {
            padding: 12px;
            font-size: 16px;
            border: 2px solid #2196F3;
            border-radius: 6px;
            width: 200px;
            margin-right: 10px;
        }
        .save-btn {
            background: #2196F3;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .save-btn:hover {
            background: #1976D2;
        }
        .current-ip {
            margin-top: 10px;
            font-weight: bold;
            color: #1976D2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ Arduino</h1>
        
        <div class="led-block">
            <h3>üî¥ –°–≤–µ—Ç–æ–¥–∏–æ–¥ 1 (PIN 7)</h3>
            <button class="btn on" onclick="controlLed(1, 'on')">–í–ö–õ–Æ–ß–ò–¢–¨</button>
            <button class="btn off" onclick="controlLed(1, 'off')">–í–´–ö–õ–Æ–ß–ò–¢–¨</button>
            <span class="status status-off" id="status1">‚ùå –í–´–ö–õ</span>
        </div>

        <div class="led-block">
            <h3>üü¢ –°–≤–µ—Ç–æ–¥–∏–æ–¥ 2 (PIN 6)</h3>
            <button class="btn on" onclick="controlLed(2, 'on')">–í–ö–õ–Æ–ß–ò–¢–¨</button>
            <button class="btn off" onclick="controlLed(2, 'off')">–í–´–ö–õ–Æ–ß–ò–¢–¨</button>
            <span class="status status-off" id="status2">‚ùå –í–´–ö–õ</span>
        </div>

        <div class="led-block">
            <h3>üü° –°–≤–µ—Ç–æ–¥–∏–æ–¥ 3 (PIN 5)</h3>
            <button class="btn on" onclick="controlLed(3, 'on')">–í–ö–õ–Æ–ß–ò–¢–¨</button>
            <button class="btn off" onclick="controlLed(3, 'off')">–í–´–ö–õ–Æ–ß–ò–¢–¨</button>
            <span class="status status-off" id="status3">‚ùå –í–´–ö–õ</span>
        </div>

        <div class="led-block">
            <h3>üîµ –°–≤–µ—Ç–æ–¥–∏–æ–¥ 4 (PIN 4)</h3>
            <button class="btn on" onclick="controlLed(4, 'on')">–í–ö–õ–Æ–ß–ò–¢–¨</button>
            <button class="btn off" onclick="controlLed(4, 'off')">–í–´–ö–õ–Æ–ß–ò–¢–¨</button>
            <span class="status status-off" id="status4">‚ùå –í–´–ö–õ</span>
        </div>

        <!-- –°–ï–ö–¶–ò–Ø –í–í–û–î–ê IP -->
        <div class="ip-section">
            <h3>üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h3>
            <div>
                <input type="text" id="ipInput" class="ip-input" placeholder="192.168.3.17" value="192.168.3.17">
                <button class="save-btn" onclick="saveIP()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å IP</button>
            </div>
            <div class="current-ip" id="currentIP">
                –¢–µ–∫—É—â–∏–π IP: 192.168.3.17
            </div>
            <div style="margin-top: 10px; font-size: 14px; color: #666;">
                ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Arduino –≤–∫–ª—é—á–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ç–∏
            </div>
        </div>
    </div>

    <script>
    let arduinoIP = '192.168.3.17'; // IP –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    function saveIP() {
        const newIP = document.getElementById('ipInput').value.trim();
        if (newIP) {
            arduinoIP = newIP;
            document.getElementById('currentIP').textContent = '–¢–µ–∫—É—â–∏–π IP: ' + newIP;
            alert('‚úÖ IP —Å–æ—Ö—Ä–∞–Ω–µ–Ω: ' + newIP);
        } else {
            alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å Arduino');
        }
    }

    async function controlLed(ledNumber, action) {
        try {
            const response = await fetch(`http://${arduinoIP}/led${ledNumber}${action}`);
            
            if (response.ok) {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
                const statusElement = document.getElementById(`status${ledNumber}`);
                statusElement.textContent = action === 'on' ? '‚úÖ –í–ö–õ' : '‚ùå –í–´–ö–õ';
                statusElement.className = action === 'on' ? 'status status-on' : 'status status-off';
            }
                
        } catch (error) {
            alert('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Arduino!\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:\n‚Ä¢ IP –∞–¥—Ä–µ—Å Arduino\n‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏\n‚Ä¢ –†–∞–±–æ—Ç—É Arduino');
            console.error('–û—à–∏–±–∫–∞:', error);
        }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π IP –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    window.addEventListener('load', function() {
        const savedIP = localStorage.getItem('arduinoIP');
        if (savedIP) {
            arduinoIP = savedIP;
            document.getElementById('ipInput').value = savedIP;
            document.getElementById('currentIP').textContent = '–¢–µ–∫—É—â–∏–π IP: ' + savedIP;
        }
    });
    </script>
</body>
</html>
